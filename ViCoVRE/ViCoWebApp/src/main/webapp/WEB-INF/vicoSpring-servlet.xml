<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE beans PUBLIC "-//SPRING//DTD BEAN//EN" "http://www.springframework.org/dtd/spring-beans.dtd">

<beans>

    <bean id="viewResolver"
          class="org.springframework.web.servlet.view.InternalResourceViewResolver">
        <property name="viewClass" value="org.springframework.web.servlet.view.JstlView"/>
        <property name="prefix" value="/WEB-INF/jsp/"/>
        <property name="suffix" value=".jsp"/>
    </bean>

    <bean name="/play.do" class="com.googlecode.vicovre.web.play.PlayRecordingController">
        <constructor-arg><ref bean="database"/></constructor-arg>
        <constructor-arg><ref bean="layoutRepository"/></constructor-arg>
        <constructor-arg><ref bean="liveAnnotationTypeRepository"/></constructor-arg>
        <!-- Comment out the following lines to ignore annotations -->
        <constructor-arg><ref bean="annotationDao"/></constructor-arg>
        <constructor-arg><value>${recording.prefix}</value></constructor-arg>
    </bean>
    <bean name="/flv.do" class="com.googlecode.vicovre.web.play.FlvController">
        <constructor-arg><ref bean="database"/></constructor-arg>
        <constructor-arg><ref bean="rtpTypeRepository"/></constructor-arg>
    </bean>
    <bean name="/image.do" class="com.googlecode.vicovre.web.play.ImageController">
        <constructor-arg><ref bean="database"/></constructor-arg>
    </bean>
    <bean name="/**/listRecordings.do" class="com.googlecode.vicovre.web.play.ListRecordingsController">
        <constructor-arg><ref bean="database"/></constructor-arg>
    </bean>
    <bean name="/**/displayRecording.do" class="com.googlecode.vicovre.web.play.DisplayRecordingController">
        <constructor-arg><ref bean="database"/></constructor-arg>
        <constructor-arg><ref bean="layoutRepository"/></constructor-arg>
        <!-- Comment out the following lines to ignore annotations -->
        <constructor-arg><ref bean="annotationDao"/></constructor-arg>
        <constructor-arg><value>${recording.prefix}</value></constructor-arg>
    </bean>
    <bean name="/**/downloadRecording.do" class="com.googlecode.vicovre.web.play.DownloadRecordingController">
        <constructor-arg><ref bean="database"/></constructor-arg>
        <constructor-arg><ref bean="layoutRepository"/></constructor-arg>
        <constructor-arg><ref bean="editableLayoutRepository"/></constructor-arg>
        <constructor-arg><ref bean="rtpTypeRepository"></ref></constructor-arg>
    </bean>
    <bean name="/**/preview.do" class="com.googlecode.vicovre.web.play.PreviewController">
        <constructor-arg><ref bean="database"/></constructor-arg>
        <constructor-arg><ref bean="rtpTypeRepository"/></constructor-arg>
    </bean>

    <bean name="/gwt.do" class="com.googlecode.vicovre.web.rest.GWTController">
        <constructor-arg><ref bean="database"/></constructor-arg>
        <constructor-arg><ref bean="layoutRepository"/></constructor-arg>
        <constructor-arg><ref bean="editableLayoutRepository"/></constructor-arg>
    </bean>
</beans>